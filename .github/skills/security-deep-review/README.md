# Security Deep Review

æ·±åº¦ç¨‹å¼ç¢¼å®‰å…¨å¯©æŸ¥å·¥å…·ï¼Œå°ˆæ³¨æ–¼åˆ†æç¨‹å¼é‚è¼¯èˆ‡æ¥­å‹™å®‰å…¨å•é¡Œã€‚

## ğŸ“‹ æ¦‚è¿°

**é¡å‹**ï¼šäººå·¥ç¨‹å¼ç¢¼å¯©æŸ¥è¼”åŠ©  
**æ–¹æ³•**ï¼šé–±è®€ç¨‹å¼ç¢¼ + é‚è¼¯åˆ†æ  
**é€Ÿåº¦**ï¼šğŸ¢ è¼ƒæ…¢ï¼ˆéœ€è©³ç´°åˆ†æï¼‰  
**ç¯„åœ**ï¼šğŸ” æ·±åº¦å„ªå…ˆï¼ˆç‰¹å®šæª”æ¡ˆ/æ¨¡çµ„ï¼‰

## ğŸ¯ ä¸»è¦åŠŸèƒ½

### 1. æ³¨å…¥æ”»æ“Šæ·±åº¦åˆ†æ
- SQL Injection åƒæ•¸åŒ–æª¢æŸ¥
- Command Injection è¼¸å…¥é©—è­‰
- å®‰å…¨ç·¨ç¢¼æ¨¡å¼é©—è­‰

### 2. XSS é˜²è­·æª¢æŸ¥
- ä½¿ç”¨è€…è¼¸å…¥è™•ç†æµç¨‹
- è¼¸å‡ºç·¨ç¢¼æª¢æŸ¥
- æ¡†æ¶å®‰å…¨æ©Ÿåˆ¶ä½¿ç”¨

### 3. èº«ä»½é©—è­‰å•é¡Œ
- å¯†ç¢¼é›œæ¹Šæ¼”ç®—æ³•æª¢æŸ¥
- JWT å®‰å…¨é…ç½®
- Session ç®¡ç†æ©Ÿåˆ¶
- å¯†é‘°å¼·åº¦é©—è­‰

### 4. æˆæ¬Šå•é¡Œ (IDOR)
- è³‡æºæ‰€æœ‰æ¬Šé©—è­‰
- æ¬Šé™æª¢æŸ¥é‚è¼¯
- æ©«å‘è¶Šæ¬Šæ¼æ´
- å‚ç›´è¶Šæ¬Šæ¼æ´

### 5. CSRF é˜²è­·
- Token é©—è­‰æ©Ÿåˆ¶
- SameSite Cookie é…ç½®
- ä¾†æºé©—è­‰æª¢æŸ¥

### 6. è¼¸å…¥é©—è­‰
- é©—è­‰é‚è¼¯å®Œæ•´æ€§
- å‹åˆ¥æª¢æŸ¥
- æ¥­å‹™è¦å‰‡é©—è­‰
- é‚Šç•Œæ¢ä»¶æª¢æŸ¥

## ğŸš€ ä½¿ç”¨æ–¹å¼

### å¯©æŸ¥å–®ä¸€æª”æ¡ˆ
```bash
@workspace ä½¿ç”¨ security-deep-review å¯©æŸ¥ src/auth/login.ts
```

### å¯©æŸ¥æ¨¡çµ„
```bash
@workspace ä½¿ç”¨ security-deep-review å¯©æŸ¥ src/auth/ ç›®éŒ„ä¸‹çš„æ‰€æœ‰æª”æ¡ˆ
```

### èšç„¦ç‰¹å®šå•é¡Œ
```bash
@workspace ä½¿ç”¨ security-deep-review å¯©æŸ¥æ”¯ä»˜æ¨¡çµ„çš„æˆæ¬Šé‚è¼¯
```

## ğŸ“Š å ±å‘Šæ ¼å¼

```
ğŸ”’ ç¨‹å¼ç¢¼å®‰å…¨å¯©æŸ¥å ±å‘Š
==========================================

[CRITICAL] SQL Injection
æª”æ¡ˆ: backend/api/users.go:78
ç¨‹å¼ç¢¼:
  76 | func GetUser(id string) (*User, error) {
> 78 |     query := fmt.Sprintf("SELECT * FROM users WHERE id = %s", id)
  79 |     var user User

å•é¡Œ: ä½¿ç”¨å­—ä¸²æ‹¼æ¥å»ºæ§‹ SQL æŸ¥è©¢ï¼Œå®¹æ˜“å—åˆ° SQL Injection æ”»æ“Š
é¢¨éšª: æ”»æ“Šè€…å¯ä»¥åŸ·è¡Œä»»æ„ SQL æŒ‡ä»¤
ä¿®å¾©å»ºè­°:
  query := "SELECT * FROM users WHERE id = $1"
  err := db.QueryRow(query, id).Scan(&user)

åƒè€ƒ: https://owasp.org/www-community/attacks/SQL_Injection
```

## â° ä½¿ç”¨æ™‚æ©Ÿ

### âœ… é©åˆä½¿ç”¨
- âœ… Pull Request ç¨‹å¼ç¢¼å¯©æŸ¥
- âœ… é‡æ§‹å¾Œé©—è­‰
- âœ… å¯¦ä½œå®‰å…¨é—œéµåŠŸèƒ½ï¼ˆç™»å…¥ã€æ”¯ä»˜ã€æˆæ¬Šï¼‰
- âœ… è¤‡é›œæ¥­å‹™é‚è¼¯æª¢æŸ¥
- âœ… æ¼æ´ä¿®å¾©é©—è­‰
- âœ… å®‰å…¨åŸ¹è¨“èˆ‡å­¸ç¿’

### âŒ ä¸é©åˆä½¿ç”¨
- âŒ éœ€è¦å¿«é€Ÿæƒææ•´å€‹å°ˆæ¡ˆ
- âŒ æª¢æŸ¥ç¬¬ä¸‰æ–¹ä¾è³´å¥—ä»¶æ¼æ´
- âŒ è‡ªå‹•åŒ– CI/CD æµç¨‹
- âŒ å®šæœŸä¾‹è¡Œæª¢æŸ¥

## ğŸ”— ç›¸é—œ Skills

- **security-fast-scan** - å¿«é€Ÿå®‰å…¨æƒæ
- **security-check-secrets** - æ•æ„Ÿè³‡æ–™æª¢æŸ¥
- **security-check-config** - å®‰å…¨é…ç½®æª¢æŸ¥

## ğŸ’¡ æœ€ä½³å¯¦è¸

### Pull Request å¯©æŸ¥
```bash
# å¯©æŸ¥ PR ä¸­è®Šæ›´çš„æª”æ¡ˆ
@workspace ä½¿ç”¨ security-deep-review å¯©æŸ¥ä»¥ä¸‹æª”æ¡ˆï¼š
- src/auth/login.ts
- src/auth/register.ts
- src/middleware/auth.ts
```

### å®‰å…¨é—œéµåŠŸèƒ½
```bash
# å¯¦ä½œæ”¯ä»˜åŠŸèƒ½å¾Œ
@workspace ä½¿ç”¨ security-deep-review æ·±åº¦å¯©æŸ¥æ”¯ä»˜æ¨¡çµ„çš„å®‰å…¨æ€§
```

### çµ„åˆä½¿ç”¨
```bash
# 1. å¿«é€Ÿæƒæç™¼ç¾å•é¡Œ
@workspace ä½¿ç”¨ security-fast-scan æƒæå°ˆæ¡ˆ

# 2. é‡å°å•é¡Œå€åŸŸæ·±åº¦å¯©æŸ¥
@workspace ä½¿ç”¨ security-deep-review å¯©æŸ¥ç™¼ç¾å•é¡Œçš„æª”æ¡ˆ
```

## ğŸ“ˆ æª¢æŸ¥é‡é»

### Criticalï¼ˆç«‹å³ä¿®å¾©ï¼‰
- [ ] SQL Injection
- [ ] Command Injection
- [ ] ç¡¬ç·¨ç¢¼çš„ç”Ÿç”¢ç’°å¢ƒæ†‘è­‰
- [ ] Remote Code Execution

### Highï¼ˆ7å¤©å…§ï¼‰
- [ ] XSS æ¼æ´
- [ ] Authentication bypass
- [ ] IDOR
- [ ] ä¸å®‰å…¨çš„å¯†ç¢¼å„²å­˜

### Mediumï¼ˆ30å¤©å…§ï¼‰
- [ ] CSRF ç¼ºå°‘é˜²è­·
- [ ] å¼±åŠ å¯†
- [ ] ç¼ºå°‘è¼¸å…¥é©—è­‰

### Lowï¼ˆä¸‹å€‹ç‰ˆæœ¬ï¼‰
- [ ] è©³ç´°éŒ¯èª¤è¨Šæ¯
- [ ] éæ™‚çš„ä¾è³´å¥—ä»¶

## ğŸ“š åƒè€ƒè³‡æº

- [OWASP Top 10](https://owasp.org/www-project-top-ten/)
- [OWASP Cheat Sheet Series](https://cheatsheetseries.owasp.org/)
- [CWE Top 25](https://cwe.mitre.org/top25/)
- [å®Œæ•´æ–‡ä»¶](./SKILL.md)
- [å®‰å…¨å ±å‘Šç¯„æœ¬](../templates/security-report-template.md)
